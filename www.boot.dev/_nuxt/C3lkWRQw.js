import{I as T,E as w,g as D,bG as b,dk as R,dl as q,dm as L,dn as U,dp as _,d8 as j,dq as H,dr as i,ds as J,dt as K,bI as F,du as N}from"./Djz0RQIo.js";import{a as O,b as Q,d as V,c as r,g as W}from"./C-qm-qlq.js";function ee(){const l=T(),{loadItemsAndGems:u}=l,{user:m,numArmor:B,numBakedSalmon:a,numSeerStones:f,numXPPotions:P,numFrozenFlames:k}=w(l),{errToast:c}=D();async function d(s){c(s);try{await u()}catch(e){c(e)}}const S=N(u,3e3),p={armor:{cost:W,buy:K,sell:J,state:B},bakedSalmon:{cost:r,buy:i,sell:H,state:a},seerStone:{cost:V,buy:j,sell:_,state:f},xpPotion:{cost:Q,buy:U,sell:L,state:P},frozenFlame:{cost:O,buy:q,sell:R,state:k}};function o(s,e){const t=p[s],y=e==="buy"?-t.cost:t.cost/2,x=t[e],{mutate:X}=b({mutation:()=>x(),onMutate(){const n=m.value;if(n)return n.Gems+=y,t.state.value+=e==="buy"?1:-1,()=>{n.Gems-=y,t.state.value-=e==="buy"?1:-1}},onSuccess:()=>F(()=>S()),onError:d});return X}const z=o("armor","buy"),g=o("armor","sell"),v=o("xpPotion","buy"),A=o("xpPotion","sell"),G=o("seerStone","buy"),C=o("seerStone","sell"),h=o("frozenFlame","buy"),E=o("frozenFlame","sell"),{mutate:I}=b({mutation:async s=>{await i()},onMutate(s){const e=m.value;if(e)return s&&a.value++,e.Gems-=r,()=>{s&&a.value--,e.Gems+=r}},onSuccess:()=>{F(()=>S())},onError:d}),M=o("bakedSalmon","sell");return{loadBuyArmor:z,loadBuyPotion:v,loadSellPotion:A,loadSellArmor:g,loadBuyBakedSalmon:(s=!0)=>I(s),loadSellBakedSalmon:M,loadSellSeerStone:C,loadBuySeerStone:G,loadSellFrozenFlame:E,loadBuyFrozenFlame:h}}export{ee as u};
