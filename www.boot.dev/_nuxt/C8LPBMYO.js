import{aR as q,aP as L,aN as T,cW as N,aJ as V,D as b,E as C,bG as F,cX as P,d as k,r as j,I as E,t as M,j as g,cY as G,G as $,m as f,o as i,b as r,A,n as x,a as W,w as z,e as U,V as J,C as Q,F as X,B as Y,c as H}from"./Djz0RQIo.js";import{u as K}from"./N7Wfx4qz.js";function O(t){return t===0?q:t===1?L:t===2?T:t===3?N:"https://cdn.iconscout.com/icon/free/png-256/code-280-460136.png"}function Z(){const{clearModalQuery:t,setModalQuery:m}=V(),d=b(),{dailyQuestBoard:p}=C(d),{acceptDailyQuestAndReload:_}=d;function c(n){const y=P(n);p.value=y}const{mutate:a}=F({mutation:_,onMutate(n){return c(n),t(),()=>{c("default"),m("quest-board")}}});return{acceptQuestAndReload:a}}const ee={class:"flex flex-col-reverse rounded-lg p-3 text-left lg:flex-row"},te={class:"mr-5 flex flex-row justify-center gap-6"},se={key:0,class:"flex items-center"},oe={class:"w-20"},ce=["src"],ae={class:"relative mt-4 flex grow flex-col"},ne={class:"mb-1 text-lg text-white"},ue={class:"text-sm text-gray-400"},le={class:"font-bold text-gray-300"},re={key:0,class:"mt-2 text-sm text-green-400"},ie=k({__name:"DailyQuestTableRow",props:{dailyQuest:{},acceptedState:{default:void 0},isDemoMode:{type:Boolean,default:!1}},emits:["questAccepted"],setup(t,{emit:m}){const d=K(),p=m,_=j(0),c=t,a=b(),{setSignupFlowAcceptedDailyQuestConstUUID:n}=a,y=E(),{isLoggedIn:D}=C(y),{dailyQuest:e,acceptedState:o}=M(c),v=g(()=>O(e.value.Difficulty)),s=g(()=>e.value?.Difficulty===0?"common":e.value?.Difficulty===1?"uncommon":e.value?.Difficulty===2?"rare":"mythic"),u=h=>h&&h.charAt(0).toUpperCase()+h.slice(1),l=g(()=>u(G(e.value?.Difficulty)));$(()=>{setInterval(()=>{_.value-=1e3},1e3)});const w=["Quests! My favorite. Let's get to it then!","Great choice! We can achieve that for sure!","The clock is ticking on that quest! Let's dive in!"],{acceptQuestAndReload:S}=Z(),I=async()=>{if(!o.value){if(c.isDemoMode){p("questAccepted",e.value.UUID);return}if(!D.value){n(e.value.UUID);return}await S(e.value.UUID),d.bootsSpeak(w)}};return(h,B)=>{const R=J;return i(),f("div",ee,[r("div",te,[x(o)?A("",!0):(i(),f("div",se,[W(R,{color:"outline",onClick:I},{default:z(()=>[...B[0]||(B[0]=[U(" Accept ",-1)])]),_:1})])),r("div",oe,[r("img",{src:v.value,width:"80",height:"80",alt:"chest",class:"mb-2"},null,8,ce)])]),r("div",ae,[r("h3",ne,Q(x(e)?.Description),1),r("div",ue,[r("span",le,Q(l.value)+":",1),U(" unlock "+Q(s.value==="uncommon"?"an":"a")+" "+Q(s.value)+" chest ",1)]),x(o)==="accepted"?(i(),f("div",re," âœ“ Quest accepted! ")):A("",!0)])])}}}),de={class:"x-lg:items-center flex flex-col"},fe={key:0,class:"flex flex-col"},_e=k({__name:"QuestTable",props:{dailyQuests:{default:void 0},dailyQuestProgress:{default:void 0},isDemoMode:{type:Boolean,default:!1}},emits:["questAccepted"],setup(t,{emit:m}){const d=m,p=t,{dailyQuests:_,dailyQuestProgress:c}=M(p),a=g(()=>y(_.value||[],c.value||{}));function n(e){if(e&&e.length){for(const o of e)if(o.AcceptedAt)return!0}return!1}function y(e,o){const v=n(e),s=[];if(e)for(const u of e){let l;v&&(u.AcceptedAt?l="accepted":l="rejected"),s.push({...u,acceptedState:l,QuestProgress:o[u.UUID]})}return s.sort((u,l)=>u.Difficulty>l.Difficulty?1:-1),s}const D=e=>{d("questAccepted",e)};return(e,o)=>{const v=ie;return i(),f("div",de,[a.value&&a.value?.length>0?(i(),f("div",fe,[(i(!0),f(X,null,Y(a.value,s=>(i(),H(v,{key:s.UUID,"accepted-state":s?.acceptedState||void 0,"daily-quest":s,"is-demo-mode":t.isDemoMode,onQuestAccepted:D},null,8,["accepted-state","daily-quest","is-demo-mode"]))),128))])):A("",!0)])}}});export{_e as _};
