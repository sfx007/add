import{_ as ve}from"./DzWoEtVq.js";import{ao as we,d as be,g as Ce,E as V,I as ke,aU as J,bJ as Te,r as f,G as Ie,N as Le,eG as Ee,l as b,eH as Se,eI as Ue,ee as $e,j as I,u as je,c as L,w as i,X as Be,o as n,a as l,n as o,b as t,m as c,K as De,A as p,e3 as Ne,_ as Pe,C as u,et as He,bE as Me,V as Ae,e as h,as as E,F as z,B as Ve,eJ as Je,cx as ze,ag as Fe,bw as F,eK as Ke,P as Ge,a2 as S,ap as Ye}from"./Djz0RQIo.js";import{H as qe,n as Oe}from"./UNvvHO8y.js";import{_ as Re}from"./DFdf6COF.js";import{_ as We}from"./DO4e62-N.js";import{_ as Xe}from"./CHlI8V3o.js";import{_ as Qe,a as Ze}from"./BQuN4aJL.js";import{_ as et}from"./HT-jZiGK.js";import{u as tt}from"./D3PxFuMY.js";import{u as st}from"./Cnao2d2z.js";import{b as ot}from"./DvE5EybM.js";import"./D6Ho5i_A.js";import"./DLZLUVU_.js";import"./CBLkfl4i.js";import"./DZoQ3b5Q.js";import"./0YUWycGk.js";import"./CSmVOpRL.js";import"./I2833azj.js";import"./Hp647MZf.js";import"./BUi9Q6PF.js";import"./CeI-xotQ.js";const lt=we("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);function nt(U){for(const _ of U){const x=new Image;x.src=_}}const at={class:"mx-auto max-w-5xl w-full"},rt={class:"flex flex-col"},it={class:"flex gap-4 items-center"},ct=["src","alt"],ut={class:"flex flex-col"},dt={class:"group flex flex-row gap-2 cursor-pointer leading-0"},mt={class:"text-xl md:text-2xl font-bold text-gray-200 group-hover:underline"},gt={class:"flex items-center gap-2"},ft=["src","alt"],pt={class:"text-gray-400"},ht={class:"mx-auto max-w-5xl w-full py-4 mb-4"},_t={class:"flex gap-4 w-full justify-center max-w-xl mx-auto text-gray-400"},xt={key:0,class:"flex flex-col gap-8 items-center"},yt={class:"flex w-full flex-col items-center gap-2 py-8 sm:py-12"},vt={class:"w-full flex flex-col max-w-5xl items-center"},wt={class:"text-2xl sm:text-3xl mb-8"},bt={key:0,class:"flex flex-col items-center gap-2"},Ct={class:"flex w-full flex-col items-center text-gray-400"},kt={class:"flex items-center gap-2 mb-2"},Tt=["src"],It={key:1,class:"flex flex-col items-center gap-2 max-w-3xl w-full"},Lt={id:"generate",class:"flex w-full flex-col items-center gap-2 py-8"},Et={class:"flex flex-col items-center"},St={key:0,class:"mb-6 flex flex-col gap-2 text-center text-xl text-gray-300"},Ut={key:0,class:"text-base text-gray-400"},$t={key:1,class:"flex flex-col items-center"},jt={key:2,class:"flex flex-col items-center"},Bt={key:0,class:"flex flex-col items-center mb-4"},Dt={class:"flex items-center"},Nt=["src"],Pt={class:"mt-4 w-full max-w-3xl"},Ht=be({__name:"index",setup(U){const{createToast:_,errToast:x}=Ce(),{user:C,isLoggedIn:y}=V(ke()),{numFreeChallenges:$}=J(),{generateNewChallenge:K,loadChallengeHistory:G,loadChallengeJobs:Y,preloadChallenge:q}=Te(),{challengeHistory:O,challengeJobs:R,userChallengeCount:j,challengesPregenerated:d}=V(J()),{getEmojiUrl:B}=tt(),D=f(!1),N=f(!1),m=f(!1),a=f(),v=f("");Ie(()=>{const e=Le().query.q;e&&typeof e=="string"&&(v.value=e)});const{error:W,refresh:X}=Ee();b(()=>{if(W.value)throw S({statusCode:404,statusMessage:"Couldn't load challenge history"})});const{error:Q,refresh:Z}=Se();b(()=>{if(Q.value)throw S({statusCode:404,statusMessage:"Couldn't load challenge jobs"})});const{error:ee,status:te,refresh:se}=Ue();b(()=>{if(ee.value)throw S({statusCode:404,statusMessage:"Couldn't load personalized challenges"})}),$e(()=>{X(),Z(),se()});const{isMobile:w}=st(),oe=I(()=>w.value?m.value?"Continue":"Start":m.value?"Continue Challenge":"Start Challenge"),le=s=>{const e=Date.now()-6048e5;return s.getTime()>=e};b(()=>{for(const s of O.value)if(le(new Date(s.AcceptedOn))&&!s.Success&&!s.SkipReason){a.value=s,m.value=!0;return}if(d.value.length){a.value=d.value[0],m.value=!1;return}});const P=I(()=>R.value.length>0),k=I(()=>j.value>=$),ne=Be("onLoginClick"),ae=async s=>{s.shiftKey||await H()},H=async()=>{D.value=!0;try{const s=await K(v.value);s&&(s.Status==="failed"?_({type:"error",text:"Failed to create challenge. If this is happening to you frequently, please let the developers know in the Discord."}):_({type:"success",text:"Your challenge is being written!",timeoutMs:5e3})),G(),Y()}catch(s){s instanceof Error&&s.name!=="AbortError"&&x(s)}finally{D.value=!1}},M=async s=>{try{await Ke(s)}catch{return x("Unable to accept challenge")}A(s)},A=s=>{Ge(`/challenges/${s}`)},re=()=>{if(N.value)return;N.value=!0;const s=ot(),e=Object.values(s).map(T=>T.url);nt(e)};return je({title:"Training Grounds",description:"Practice your programming skills with infinite personalized coding challenges and mock interviews",noindex:!0}),(s,e)=>{const T=ve,ie=Pe,g=Ae,ce=De,ue=lt,de=qe,me=Re,ge=We,fe=ze,pe=Fe,he=Xe,_e=Qe,xe=Ze,ye=et;return n(),L(ye,null,{default:i(()=>[l(T,{ready:!!o(y)||!!o(d).length,status:[o(te)]},null,8,["ready","status"]),l(he,{class:"bg-image-blue min-h-screen",title:"Training Grounds","is-h1":""},{main:i(()=>[l(ce,null,{default:i(()=>[t("section",at,[a.value?(n(),c("div",{key:0,class:"flex justify-between items-center w-full h-24 border border-gray-700 p-6 mb-2 mx-auto max-w-4xl hover:border-yellow-500",onMouseenter:e[1]||(e[1]=r=>o(q)(a.value.UUID))},[t("div",rt,[t("div",it,[t("img",{src:o(Ne)(a.value.Topics.ProgLang||""),alt:`${a.value.Topics.ProgLang}`,class:"h-10 w-10 md:h-12 md:w-12 shrink-0 rounded object-cover"},null,8,ct),t("div",ut,[l(ie,{to:`/challenges/${a.value.UUID}`},{default:i(()=>[t("h2",dt,[t("span",mt,u(a.value.Title),1)])]),_:1},8,["to"]),t("div",gt,[t("img",{src:o(He)(a.value.Topics.Difficulty||0),alt:`Difficulty ${a.value.Topics.Difficulty}`,class:"h-6 w-6 shrink-0 object-cover"},null,8,ft),t("span",pt,u(o(Me)(a.value.Topics.Type)),1)])])])]),l(g,{color:"yellow",class:"h-10 px-6 py-2",onClick:e[0]||(e[0]=r=>m.value?A(a.value.UUID):M(a.value.UUID))},{default:i(()=>[h(u(oe.value),1)]),_:1})],32)):p("",!0)])]),_:1}),t("section",ht,[t("div",_t,[l(g,{link:"/training-grounds/search",class:"flex gap-2 items-center p-2 text-xs sm:text-sm",color:"outline"},{default:i(()=>[l(ue,{"stroke-width":"1.5",class:"h-4 w-4 sm:h-6 sm:w-6"}),t("span",null,u(o(w)?"Search":"Search existing challenges"),1)]),_:1}),o(y)?(n(),L(g,{key:0,link:"/training-grounds/history",class:"flex gap-2 items-center p-2 text-xs sm:text-sm",color:"outline"},{default:i(()=>[l(de,{"stroke-width":"1.5",class:"h-4 w-4 sm:h-6 sm:w-6"}),t("span",null,u(o(w)?"History":"Your challenge history"),1)]),_:1})):p("",!0)])]),o(y)?(n(),c(z,{key:1},[t("section",yt,[t("div",vt,[t("h2",wt,u(o(w)?"New personalized challenges":"New personalized challenges for you"),1),o(d).length?(n(),c("div",It,[(n(!0),c(z,null,Ve(o(d).slice(0,5),r=>(n(),L(ge,{key:r.UUID,title:r.Title,uuid:r.UUID,topics:r.Topics,"prog-lang":r.Topics?.ProgLang,date:r.CreatedAt,"orb-color":"gray",class:"max-w-2xl w-full",onClick:Mt=>M(r.UUID)},null,8,["title","uuid","topics","prog-lang","date","onClick"]))),128))])):(n(),c("div",bt,[t("div",Ct,[t("div",kt,[e[5]||(e[5]=t("h2",{class:"text-xl md:text-2xl"},"No challenges... yet",-1)),t("img",{src:o(B)("bootspray"),alt:"Boots the bear, crying",class:"h-6 w-6 sm:h-8 sm:w-8"},null,8,Tt)]),e[6]||(e[6]=t("p",{class:"text-center text-sm sm:text-base max-w-96"}," New personalized challenges will be generated for you as you complete lessons. ",-1))])]))])]),t("section",Lt,[t("div",Et,[o(C)?.IsMember?p("",!0):(n(),c("div",St,[t("p",null,u(`${o(j)}/${o($)} Free Challenges Used`),1),k.value?(n(),c("p",Ut," You've used all your free challenges, become a member to continue ")):p("",!0)])),!o(C)?.IsMember&&k.value?(n(),c("div",$t,[l(g,{color:"gray",link:{path:"/pricing"}},{default:i(()=>[E(s.$slots,"default",{},()=>[e[7]||(e[7]=h("Become a member",-1))],!0)]),_:3})])):(n(),c("div",jt,[l(Je,{name:"fade",mode:"out-in",appear:""},{default:i(()=>[P.value?(n(),c("div",Bt,[t("div",Dt,[t("img",{src:o(B)("bootsthink"),alt:"Boots the bear, thinking",class:"h-6 w-6 sm:h-8 sm:w-8 mr-2"},null,8,Nt),e[8]||(e[8]=h(" Boots is busy writing your challenge. You'll be notified when it's ready! ",-1))]),l(fe,{"stroke-width":"1.5",class:"animate-spin m-4"})])):p("",!0)]),_:1}),l(g,{color:"gray",disabled:P.value,onClick:H,onMouseenter:re},{default:i(()=>[E(s.$slots,"default",{},()=>[e[9]||(e[9]=h(" Create Challenge ",-1))],!0)]),_:3},8,["disabled"]),e[10]||(e[10]=t("p",{class:"text-xs italic text-gray-400 mt-2"}," takes about 45 seconds ",-1))]))]),t("div",Pt,[e[11]||(e[11]=t("p",{class:"mb-1 text-left text-xs text-gray-500"}," *optional generation instructions ",-1)),l(pe,{modelValue:v.value,"onUpdate:modelValue":e[2]||(e[2]=r=>v.value=r),"textarea-rows":3,"enable-auto-resize":"",type:"textarea",placeholder:"Give me a hard coding challenge about list slicing in Python where I have to fix a bug...","aria-label":"Challenge generation instructions",disabled:!o(y)||!o(C)?.IsMember&&k.value,onKeyup:F(ae,["enter"]),onKeydown:F(o(Oe),["enter"])},null,8,["modelValue","disabled","onKeydown"])])])],64)):(n(),c("div",xt,[e[4]||(e[4]=t("p",{class:"text-gray-300"}," You need to be signed in to access the coding challenges. ",-1)),l(me,{onClick:o(ne)},{default:i(()=>[E(s.$slots,"default",{},()=>[e[3]||(e[3]=h("SIGN IN AND START",-1))],!0)]),_:3},8,["onClick"])]))]),_:3}),l(_e,{gem:""}),l(xe,{class:"flex grow"})]),_:3})}}}),as=Ye(Ht,[["__scopeId","data-v-b3964ed2"]]);export{as as default};
