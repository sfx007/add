import{h,dA as m,dB as S}from"./Djz0RQIo.js";import{u as d}from"./CowOrRbn.js";var f="https://js.stripe.com/v3",C=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/;var y=function(){for(var r=document.querySelectorAll('script[src^="'.concat(f,'"]')),e=0;e<r.length;e++){var t=r[e];if(C.test(t.src))return t}return null},E=function(r){var e="",t=document.createElement("script");t.src="".concat(f).concat(e);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(t),t},I=function(r,e){!r||!r._registerWrapper||r._registerWrapper({name:"stripe-js",version:"1.54.2",startTime:e})},c=null,g=function(r){return c!==null||(c=new Promise(function(e,t){if(typeof window>"u"||typeof document>"u"){e(null);return}if(window.Stripe){e(window.Stripe);return}try{var n=y();n&&r||n||(n=E(r)),n.addEventListener("load",function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}),n.addEventListener("error",function(){t(new Error("Failed to load Stripe.js"))})}catch(i){t(i);return}})),c},k=function(r,e,t){if(r===null)return null;var n=r.apply(void 0,e);return I(n,t),n},w=Promise.resolve().then(function(){return g(null)}),v=!1;w.catch(function(o){v||console.warn(o)});var l=function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];v=!0;var n=Date.now();return w.then(function(i){return k(i,e,n)})};const p="pk_live_fbxxM4d9vtfIeSClZwjRtBCs00IzxS2rqu";function j(){const{eventBeginCheckout:o}=h();async function r(t,n,i,u){const a=await S(t.ID,n,t.CurrencyCode,i,u);try{const s=await l(p);if(!s)throw new Error("Stripe not loaded");o({currency:t.CurrencyCode,value:d(t.UnitAmount,t.CurrencyCode),transactionId:a.id,itemId:t.ProductID}),await s.redirectToCheckout({sessionId:a.id})}catch{throw new Error("Couldn't open stripe checkout")}}async function e(t,n,i){const u=await m(t.ID,n,t.CurrencyCode,i);try{const a=await l(p);if(!a)throw new Error("Stripe not loaded");o({currency:t.CurrencyCode,value:d(t.UnitAmount,t.CurrencyCode),transactionId:u.id,itemId:t.ProductID}),await a.redirectToCheckout({sessionId:u.id})}catch{throw new Error("Couldn't open stripe gift checkout")}}return{checkout:r,giftCheckout:e}}export{j as u};
